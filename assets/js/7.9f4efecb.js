(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{210:function(s,a,t){s.exports=t.p+"assets/img/htop.87e6c840.png"},211:function(s,a,t){s.exports=t.p+"assets/img/zsh-before.21757f06.png"},212:function(s,a,t){s.exports=t.p+"assets/img/zsh-after.53be29d3.png"},213:function(s,a,t){s.exports=t.p+"assets/img/zsh-theme.626e5ad4.png"},214:function(s,a,t){s.exports=t.p+"assets/img/zsh-plugins.d2f0e132.png"},245:function(s,a,t){"use strict";t.r(a);var e=t(0),r=Object(e.a)({},function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"centos-7-安装小记"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#centos-7-安装小记","aria-hidden":"true"}},[s._v("#")]),s._v(" CentOS 7 安装小记")]),s._v(" "),e("BuddyLogo",{attrs:{who:"centos"}}),s._v(" "),e("p",[s._v("使用 CentOS 有一段时间了，作为服务器再好不过，这里记下入门操作，以及常用的软件安装，以云服务器为例。不足之处待指正。")]),s._v(" "),e("h2",{attrs:{id:"准备工作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#准备工作","aria-hidden":"true"}},[s._v("#")]),s._v(" 准备工作")]),s._v(" "),e("ul",[e("li",[s._v("本地 Windows，用 git-bash，用其自带的 ssh 来登录 CentOS")]),s._v(" "),e("li",[s._v("某云 2 核 2G 云主机，50G 硬盘，"),e("em",[s._v("要买标准主机，别买什么建站专用啥的，除非你愿意")])]),s._v(" "),e("li",[s._v("云平台提供 CentOS 7 镜像，选最新版即可，"),e("em",[s._v("通常植入了监控程序，酌情选择")])]),s._v(" "),e("li",[s._v("设置好 root 密码，搓搓手，云平台自动安装好，记下服务器公网 IP")])]),s._v(" "),e("p",[s._v("有公网 IP，现在就可以直接登录，打开 git-bash 输入：")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" root@主机IP\n")])])]),e("p",[e("em",[s._v("如果 ssh 登录失败，并出现 "),e("code",[s._v("know host")]),s._v(" 字眼的错误，需要删除本地用户目录下 "),e("code",[s._v(".ssh/known_hosts")]),s._v(" 文件。")])]),s._v(" "),e("p",[s._v("第一次访问：")]),s._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("Are you sure you want to continue connecting (yes/no)?\n")])])]),e("p",[s._v("输入 "),e("code",[s._v("yes")]),s._v(" 按回车确定，再输入密码。")]),s._v(" "),e("h2",{attrs:{id:"初始操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#初始操作","aria-hidden":"true"}},[s._v("#")]),s._v(" 初始操作")]),s._v(" "),e("h3",{attrs:{id:"更改用户"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更改用户","aria-hidden":"true"}},[s._v("#")]),s._v(" 更改用户")]),s._v(" "),e("p",[s._v("root 用户位高权重，误操作或被盗，后果很严重，第一步就应该新建小用户。")]),s._v(" "),e("p",[s._v("可选择自己喜欢的昵称，这里以 cnine 用户名为例：")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("useradd")]),s._v(" cnine\n")])])]),e("p",[s._v("设置新用户的登录密码：")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("passwd")]),s._v(" cnine\n")])])]),e("p",[s._v("关闭 root 的 ssh 登录，使用 "),e("code",[s._v("vim /etc/ssh/sshd_config")]),s._v(" 编辑配置文件，找到这一段：")]),s._v(" "),e("div",{staticClass:"language-ini extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ini"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#PermitRootLogin yes")]),s._v("\n")])])]),e("p",[s._v("把包含 "),e("code",[s._v("PermitRootLogin")]),s._v(" 这一行改为 "),e("code",[s._v("PermitRootLogin no")]),s._v(" ，注意删除 "),e("code",[s._v("#")]),s._v(" 符号，保存，重启 ssh 服务：")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" sshd restart\n")])])]),e("p",[s._v("现在 root 用户就无法直接登录，只能先登录普通用户，通过 "),e("code",[s._v("su")]),s._v(" 命令，输入 root 密码切换至 root 用户。")]),s._v(" "),e("h3",{attrs:{id:"更新安装源"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更新安装源","aria-hidden":"true"}},[s._v("#")]),s._v(" 更新安装源")]),s._v(" "),e("p",[s._v("先备份旧源：")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup\n")])])]),e("p",[s._v("直接上国内大厂的源，"),e("a",{attrs:{href:"https://opsx.alibaba.com/mirror",target:"_blank",rel:"noopener noreferrer"}},[s._v("在此"),e("OutboundLink")],1),s._v("，暴力添加：")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo\n")])])]),e("p",[s._v("或者：")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo\n")])])]),e("p",[s._v("还差 EPEL 源，"),e("em",[s._v("有旧的也可以先备份")]),s._v(" ：")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo\n")])])]),e("p",[s._v("添加好了所有源，执行 "),e("code",[s._v("yum makecache")]),s._v(" 生成缓存，现在大部分软件就可以开始装了。")]),s._v(" "),e("h3",{attrs:{id:"更新软件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更新软件","aria-hidden":"true"}},[s._v("#")]),s._v(" 更新软件")]),s._v(" "),e("p",[e("strong",[s._v("注意！如果是公家的服务器，千万不要手贱去更新！")])]),s._v(" "),e("p",[s._v("用 root 用户进行更新，包管理器 yum 需要 root 的权限。")]),s._v(" "),e("p",[s._v("暴力更新：")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("yum upgrade -y\n")])])]),e("p",[s._v("亦可使用 "),e("code",[s._v("yum update -y")]),s._v(" ，只是更新，不会淘汰过时的软件。")]),s._v(" "),e("p",[s._v("更新后接着就可以安装常用的工具，慎重起见可以重启系统。")]),s._v(" "),e("h3",{attrs:{id:"常用工具"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常用工具","aria-hidden":"true"}},[s._v("#")]),s._v(" 常用工具")]),s._v(" "),e("h4",{attrs:{id:"htop：实用系统监控"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#htop：实用系统监控","aria-hidden":"true"}},[s._v("#")]),s._v(" htop：实用系统监控")]),s._v(" "),e("p",[e("img",{attrs:{src:t(210),alt:""}})]),s._v(" "),e("p",[s._v("左上角分别是CPU核心、内存、交换空间使用率；右上角是进程数、负载情况、开机时间；下面是所有的进程信息，按 F5 可切换树状结构，F9 消灭选中的进程。")]),s._v(" "),e("p",[s._v("安装：")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("htop")]),s._v(" -y\n")])])]),e("p",[s._v("直接使用 "),e("code",[s._v("htop")]),s._v(" 命令进入界面，ESC 或 Ctrl+C 退出。")]),s._v(" "),e("h4",{attrs:{id:"zsh：尽显逼格的-shell"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#zsh：尽显逼格的-shell","aria-hidden":"true"}},[s._v("#")]),s._v(" zsh：尽显逼格的 shell")]),s._v(" "),e("p",[s._v("使用前：")]),s._v(" "),e("p",[e("img",{attrs:{src:t(211),alt:""}})]),s._v(" "),e("p",[s._v("使用后（af-magic 主题）：")]),s._v(" "),e("p",[e("img",{attrs:{src:t(212),alt:""}})]),s._v(" "),e("p",[s._v("zsh 社区推动下，诞生了丰富的插件和主题，shell 中的利器。")]),s._v(" "),e("p",[s._v("安装 zsh 和 git：")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" zsh "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" -y\n")])])]),e("p",[s._v("安装 oh-my-zsh 施以魔法加持，在任意用户下安装 oh-my-zsh，只对该用户生效：")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("sh -c "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),s._v("\n")])])]),e("p",[s._v("或者：")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("sh -c "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -fsSL https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh"),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v('"')]),s._v("\n")])])]),e("p",[s._v("输入 "),e("code",[s._v("zsh")]),s._v(" 打开新世界，"),e("em",[s._v("用户登录时偶尔会有 zsh 的更新提示，别慌。")])]),s._v(" "),e("p",[s._v("使用 "),e("code",[s._v("vim ~/.zshrc")]),s._v(" 配置主题、插件：")]),s._v(" "),e("p",[e("img",{attrs:{src:t(213),alt:""}})]),s._v(" "),e("p",[e("img",{attrs:{src:t(214),alt:""}})]),s._v(" "),e("p",[s._v("参考 "),e("a",{attrs:{href:"http://ohmyz.sh/",target:"_blank",rel:"noopener noreferrer"}},[s._v("oh-my-zsh 官方"),e("OutboundLink")],1),s._v(" ，以及 "),e("a",{attrs:{href:"https://github.com/robbyrussell/oh-my-zsh/wiki/Themes",target:"_blank",rel:"noopener noreferrer"}},[s._v("主题"),e("OutboundLink")],1),s._v(" 、 "),e("a",{attrs:{href:"https://github.com/robbyrussell/oh-my-zsh/wiki/Plugins",target:"_blank",rel:"noopener noreferrer"}},[s._v("插件"),e("OutboundLink")],1),s._v(" ，推荐 docker、systemd、git 插件。")]),s._v(" "),e("h2",{attrs:{id:"常用软件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常用软件","aria-hidden":"true"}},[s._v("#")]),s._v(" 常用软件")]),s._v(" "),e("p",[s._v("在此收集开发中常用的某些软件特有的安装渠道，均以 root 用户操作。")]),s._v(" "),e("h3",{attrs:{id:"nodejs"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nodejs","aria-hidden":"true"}},[s._v("#")]),s._v(" NodeJS")]),s._v(" "),e("p",[s._v("推荐通过 "),e("a",{attrs:{href:"https://github.com/nodesource/distributions",target:"_blank",rel:"noopener noreferrer"}},[s._v("nodesource"),e("OutboundLink")],1),s._v(" 的安装方式获取。")]),s._v(" "),e("p",[s._v("以 8.x 为例， "),e("em",[s._v("已安装了低版本可以先 "),e("code",[s._v("yum erase nodejs -y")]),s._v(" 卸载。")])]),s._v(" "),e("p",[s._v("使用 nodesource 提供的对应 CentOS 的安装脚本：")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -sL https://rpm.nodesource.com/setup_8.x "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" -\n")])])]),e("p",[s._v("nodesource 的源就添加成功了，现在用正常的安装方式：")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" nodejs -y\n")])])]),e("h3",{attrs:{id:"docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker","aria-hidden":"true"}},[s._v("#")]),s._v(" Docker")]),s._v(" "),e("p",[s._v("国内使用 Docker，资源的下载很慢，推荐国内 DaoCloud 的\n"),e("a",{attrs:{href:"https://download.daocloud.io/Docker_Mirror/Docker",target:"_blank",rel:"noopener noreferrer"}},[s._v("安装脚本"),e("OutboundLink")],1),s._v(" 、\n"),e("a",{attrs:{href:"http://get.daocloud.io/",target:"_blank",rel:"noopener noreferrer"}},[s._v("下载页"),e("OutboundLink")],1),s._v(" 以及 "),e("a",{attrs:{href:"https://www.daocloud.io/mirror#accelerator-doc",target:"_blank",rel:"noopener noreferrer"}},[s._v("加速器"),e("OutboundLink")],1),s._v(" ，\n官方还提供 "),e("a",{attrs:{href:"http://guide.daocloud.io/dcs",target:"_blank",rel:"noopener noreferrer"}},[s._v("学习文档"),e("OutboundLink")],1),s._v(" 。")]),s._v(" "),e("p",[s._v("安装：")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -sSL https://get.daocloud.io/docker "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" sh\n")])])]),e("p",[s._v("卸载：")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("yum remove docker \\ \n\t\t\tdocker-common \\ \n\t\t\tcontainer-selinux \\ \n\t\t\tdocker-selinux \\ \n\t\t\tdocker-engine \n")])])]),e("PrettyComment")],1)},[],!1,null,null,null);a.default=r.exports}}]);